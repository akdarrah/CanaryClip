.row.schematic-view
  .col-xs-12.white-stripe
    .col-xs-12.col-md-8
      .slick-slider
        - @schematic.renders.standard_resolution.camera_angle_order.each_with_index do |render, index|
          = image_tag render.file.url
      %br
      .description
        .description-text
          = simple_format @schematic.description
        %br
        = formatted_date @schematic.created_at
        - if can?(:update, @schematic)
          .description-form
            = simple_form_for @schematic do |f|
              = f.input :description, label: false
              = f.button :submit, 'Save', class: "btn-primary"
      %br
    .col-xs-12.col-md-4
      %p
        = image_tag(@schematic.character.avatar.url, class: 'small-character-avatar')
        = @schematic.character
      %hr
      %input{type: 'text', readonly: 'readonly', value: @schematic.permalink}
      %p.small Use the command `mb load #{@schematic.permalink}` to download this schematic to your clipboard.
      - download_count = number_with_delimiter(@schematic.total_download_impressions)
      %p= link_to "Download #{download_count}", download_schematic_path(@schematic), class: 'btn btn-primary btn-block'
      - @schematic.downloaded_by_characters.each do |character|
        = image_tag(character.avatar.url, class: 'small-character-avatar')
      %hr
      - favorite_count = number_with_delimiter(@schematic.favorited_by_characters.count)
      - if @favorite.present?
        %p= link_to "Unfavorite #{favorite_count}", schematic_favorite_path(@schematic, @favorite), class: 'btn btn-danger btn-block', method: :delete
      - else
        %p= link_to "Favorite #{favorite_count}", schematic_favorites_path(@schematic), class: 'btn btn-danger btn-block', method: :post
      - @schematic.favorited_by_characters.each do |character|
        = image_tag(character.avatar.url, class: 'small-character-avatar')
      %hr
        = social_share_button_tag t('.social_share_title', name: @schematic.permalink, character_name: @schematic.character.username)
        %dl
          %dt Views
          %dd= number_with_delimiter @schematic.total_show_impressions
          %dt Dimensions
          %dd= dimensions(@schematic)
          %dt= "#{number_with_delimiter(@schematic.total_block_count)} Blocks"
          %dd
            - @schematic.block_counts.visible.most_used_order.each do |block_count|
              = block_icon_with_title(block_count)

- content_for :script do
  :javascript
    $(document).ready(function(){
      $('.slick-slider').slick({
        dots: true,
        accessibility: true,
        autoplay: true
      });

      $('.description-text').readmore();
    });
